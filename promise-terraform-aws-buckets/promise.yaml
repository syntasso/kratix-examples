apiVersion: platform.kratix.io/v1alpha1
kind: Promise
metadata:
  creationTimestamp: null
  labels:
    kratix.io/promise-version: v0.0.1
  name: s3
spec:
  api:
    apiVersion: apiextensions.k8s.io/v1
    kind: CustomResourceDefinition
    metadata:
      creationTimestamp: null
      name: s3s.example.syntasso.io
    spec:
      group: example.syntasso.io
      names:
        kind: S3
        plural: s3s
        singular: s3
      scope: Namespaced
      versions:
      - name: v1alpha1
        schema:
          openAPIV3Schema:
            properties:
              spec:
                default: {}
                properties:
                  bucketName:
                    description: (Optional, Forces new resource) The name of the bucket.
                      If omitted, Terraform will assign a random, unique name.
                    type: string
                  team:
                    description: Team name identifier.
                    enum:
                    - mobile
                    - backend
                    - frontend
                    type: string
                type: object
            type: object
        served: true
        storage: true
    status:
      acceptedNames:
        kind: ""
        plural: ""
      conditions: null
      storedVersions: null
  workflows:
    config: {}
    promise:
      configure:
      - apiVersion: platform.kratix.io/v1alpha1
        kind: Pipeline
        metadata:
          name: dependencies
        spec:
          containers:
          - image: kratix-workshop/s3-promise-pipeline:v0.1.0
            name: configure-deps
    resource:
      configure:
      - apiVersion: platform.kratix.io/v1alpha1
        kind: Pipeline
        metadata:
          creationTimestamp: null
          name: s3-bucket-dest-resource-pipeline
        spec:
          containers:
          - command:
            - /app/scripts/set-destination-selectors
            image: kratix-guide/s3-bucket-dest-resource-pipeline:v0.1.0
            name: s3-bucket-dest-selectors
          - command:
            - /app/scripts/template-bucket
            image: kratix-guide/s3-bucket-dest-resource-pipeline:v0.1.0
            name: s3-bucket-template
          jobOptions: {}
          rbac: {}
status:
  workflows: 0
  workflowsFailed: 0
  workflowsSucceeded: 0
